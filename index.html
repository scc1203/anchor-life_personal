<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anchor</title>
    
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='100' fill='%23FFC8D1'/%3E%3Cpath d='M256 64 C273.6 64 288 78.4 288 96 C288 110.6 278.3 122.9 265.1 126.8 L265.1 178.9 C337.8 188.6 392 253.6 392 330 L392 352 C392 360.8 384.8 368 376 368 C367.2 368 360 360.8 360 352 L360 330 C360 271.4 314.6 223.4 256 220.3 L256 398.4 C278.5 405.2 296 425.9 296 452 C296 485.1 269.1 512 236 512 C202.9 512 176 485.1 176 452 C176 425.9 193.5 405.2 216 398.4 L216 220.3 C157.4 223.4 112 271.4 112 330 L112 352 C112 360.8 104.8 368 96 368 C87.2 368 80 360.8 80 352 L80 330 C80 253.6 134.2 188.6 206.9 178.9 L206.9 126.8 C193.7 122.9 184 110.6 184 96 C184 78.4 198.4 64 216 64 L256 64 Z' fill='white'/%3E%3C/svg%3E">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='100' fill='%23FFC8D1'/%3E%3Cpath d='M256 64 C273.6 64 288 78.4 288 96 C288 110.6 278.3 122.9 265.1 126.8 L265.1 178.9 C337.8 188.6 392 253.6 392 330 L392 352 C392 360.8 384.8 368 376 368 C367.2 368 360 360.8 360 352 L360 330 C360 271.4 314.6 223.4 256 220.3 L256 398.4 C278.5 405.2 296 425.9 296 452 C296 485.1 269.1 512 236 512 C202.9 512 176 485.1 176 452 C176 425.9 193.5 405.2 216 398.4 L216 220.3 C157.4 223.4 112 271.4 112 330 L112 352 C112 360.8 104.8 368 96 368 C87.2 368 80 360.8 80 352 L80 330 C80 253.6 134.2 188.6 206.9 178.9 L206.9 126.8 C193.7 122.9 184 110.6 184 96 C184 78.4 198.4 64 216 64 L256 64 Z' fill='white'/%3E%3C/svg%3E">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        /* --- ðŸŽ¨ Anchor v3.5 çº¯å‡€å›¾æ ‡ç‰ˆ --- */
        :root {
            --bg-blue: #D4F1F4;
            --bg-wood: #FDF6E3;
            --bg-pink: #FFE2E2;
            --bg-sos:  #E8DFF5;
            --bg-setting: #F0F4F8;
            --text-main: #5D5C61;
            --gold: #D4AF37;
            --sport-green: #B5EAD7;
            --cycle-purple: #C7CEEA;
            --frog-green: #9CCC65;
            --flash-yellow: #FFD54F;
            --danger-red: #ff6b6b;
            --footprint-grey: #90A4AE;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            margin: 0; padding: 0; background-color: #f0f2f5;
            color: var(--text-main); display: flex; justify-content: center;
            min-height: 100vh;
            overscroll-behavior-y: none; 
        }

        .container {
            width: 100%; max-width: 450px; background-color: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
            display: flex; flex-direction: column;
            position: relative;
            min-height: 100vh;
        }

        /* Header */
        .header {
            padding: 15px 20px; background: #fff; display: flex;
            justify-content: space-between; align-items: center; border-bottom: 1px solid #eee;
            padding-top: max(15px, env(safe-area-inset-top));
        }
        .app-title { font-weight: bold; font-size: 1.1rem; color: #444; }
        .version-badge { background: #FF9AA2; color: #fff; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-left: 5px; }
        .btn-icon { cursor: pointer; font-size: 1.2rem; opacity: 0.6; }

        /* Stats Bar */
        .stats-bar {
            display: flex; justify-content: space-around; padding: 10px 15px; background: #fff;
            border-bottom: 1px solid #eee;
        }
        .stat-btn {
            flex: 1; margin: 0 5px; padding: 8px; border-radius: 12px; cursor: pointer;
            background: #fafafa; border: 1px solid #eee; text-align: center;
            transition: all 0.1s; user-select: none;
        }
        .stat-btn:active { transform: scale(0.96); background: #f0f0f0; }
        .stat-label { font-size: 0.8rem; color: #666; margin-right: 5px; }
        .stat-count { font-weight: bold; font-size: 1rem; color: #333; font-family: monospace; }
        .stat-btn.willpower { color: #5C6BC0; }
        .stat-btn.joy { color: #FFA726; }

        /* Filter */
        .section-filter {
            background-color: var(--bg-blue); padding: 20px; text-align: center;
            border-bottom-left-radius: 25px; border-bottom-right-radius: 25px;
            transition: background 0.4s; position: relative; z-index: 10;
        }
        .mode-tabs { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
        .mode-tab {
            padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; cursor: pointer;
            background: rgba(255,255,255,0.5); transition: all 0.2s;
        }
        .mode-tab.active { background: #fff; font-weight: bold; transform: translateY(-1px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        .control-group { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
        select { padding: 8px 12px; border: none; border-radius: 10px; background: rgba(255,255,255,0.9); font-size: 16px; }
        
        .btn-main {
            background-color: #FF9AA2; color: white; font-weight: bold; font-size: 1.1rem;
            padding: 12px 40px; border: none; border-radius: 30px;
            box-shadow: 0 4px 12px rgba(255, 154, 162, 0.4); cursor: pointer; transition: transform 0.1s;
        }
        .btn-main:active { transform: scale(0.95); }

        /* Display */
        .section-display {
            flex-grow: 1; background-color: var(--bg-pink); display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; min-height: 220px; transition: background 0.4s;
        }
        .card {
            background: white; padding: 25px; border-radius: 20px; text-align: center; width: 85%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.06); display: none;
            animation: slideUp 0.4s ease-out forwards;
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .card-icon { font-size: 3.5rem; display: block; margin-bottom: 10px; }
        .card-title { font-size: 1.3rem; font-weight: bold; margin-bottom: 5px; color: #333; }
        .card-desc { font-size: 0.9rem; color: #777; line-height: 1.6; margin-bottom: 15px; }
        .card-time { 
            display: inline-block; background: #f0f0f0; color: #888; padding: 2px 8px; 
            border-radius: 8px; font-size: 0.75rem; margin-top: 5px; 
        }
        
        .card-badge { padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; vertical-align: middle; margin-left: 5px; color: #fff; }
        .bg-cycle { background: var(--cycle-purple); }
        .bg-frog { background: var(--frog-green); }
        .bg-flash { background: var(--flash-yellow); color: #555; }

        .btn-card-action {
            background: #f0f0f0; padding: 8px 18px; border-radius: 15px; font-size: 0.85rem; 
            border: none; cursor: pointer; color: #555; margin: 0 5px;
        }

        /* Input */
        .section-input { background-color: var(--bg-wood); padding: 20px; }
        .input-box {
            background: #fff; padding: 5px; border-radius: 15px; display: flex; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 10px;
        }
        textarea#inpTitle { 
            border: none; padding: 10px; flex: 1; border-radius: 10px; outline: none; 
            font-size: 16px; font-family: inherit; resize: none; height: 24px; line-height: 24px;
        }
        .btn-add { background: #B5EAD7; border: none; padding: 0 20px; border-radius: 10px; font-weight: bold; color: #555; cursor: pointer; }
        
        .input-options { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
        .tags-row { display: flex; gap: 6px; flex-wrap: wrap; }
        .tag {
            padding: 4px 10px; border-radius: 12px; font-size: 0.75rem; background: rgba(0,0,0,0.05); 
            cursor: pointer; border: 1px solid transparent; transition: all 0.2s;
        }
        .tag.active { background: #C7CEEA; border-color: #989ec2; color: #333; }
        .tag[data-v="sport"].active { background: var(--sport-green); border-color: #99cbb9; }

        .cycle-switch {
            font-size: 0.75rem; color: #666; display: flex; align-items: center; gap: 5px; cursor: pointer;
            background: rgba(255,255,255,0.5); padding: 4px 8px; border-radius: 10px;
        }
        .cycle-switch.active { background: var(--cycle-purple); color: #fff; font-weight: bold; }

        .time-select-small {
            font-size: 16px; padding: 4px; border-radius: 8px; border: 1px solid #ddd; color: #666;
            transition: opacity 0.3s;
        }
        .time-select-small.disabled { opacity: 0.3; pointer-events: none; }

        /* Lists */
        .section-list { background-color: #fff; padding: 20px; }
        .list-section-header {
            display: flex; justify-content: space-between; align-items: center; 
            padding: 10px 0; border-bottom: 1px solid #eee; cursor: pointer; margin-top: 10px;
        }
        .list-title { font-size: 0.95rem; font-weight: bold; color: #555; }
        .task-list { list-style: none; padding: 0; margin: 0; max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .task-list.open { max-height: 400px; overflow-y: auto; }
        
        .task-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 5px; border-bottom: 1px solid #f9f9f9; }
        .task-status-done { opacity: 0.4; text-decoration: line-through; }
        .list-badge { font-size: 0.6rem; padding: 1px 4px; border-radius: 4px; margin-left: 5px; border: 1px solid #eee; color: #888;}
        .lb-frog { color: var(--frog-green); border-color: var(--frog-green); font-weight:bold; }
        .lb-flash { color: #FBC02D; border-color: #FBC02D; }

        .footprint-time { font-size: 0.7rem; color: #aaa; margin-right: 10px; font-family: monospace;}
        .footprint-item { color: #666; font-size: 0.85rem; }

        .archive-section { margin-top: 20px; border-top: 4px solid #f0f2f5; padding-top: 15px; }
        .archive-list { display: none; margin-top: 10px; color: #999; font-size: 0.85rem; }
        .archive-item { padding: 5px 0; display: flex; gap: 10px; }
        .archive-date { font-family: monospace; color: #ccc; }

        /* Manual & Settings */
        .section-manual { background-color: #fff; padding: 20px; border-top: 1px solid #eee; color: #666; font-size: 0.9rem; line-height: 1.6; }
        details { background: #f9f9f9; border-radius: 8px; overflow: hidden; margin-bottom: 20px; }
        summary { padding: 15px; font-weight: bold; cursor: pointer; list-style: none; display: flex; justify-content: space-between; align-items: center; color: #444; }
        summary::after { content: '+'; font-size: 1.2rem; font-weight: normal; color: #999; }
        details[open] summary::after { content: '-'; }
        .manual-content { padding: 0 15px 20px 15px; border-top: 1px solid #eee; font-size: 0.85rem; }
        .manual-h3 { font-weight: bold; color: #333; margin: 15px 0 5px 0; }
        .manual-tag { background: #eee; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin: 0 2px; }

        .section-settings { background-color: var(--bg-setting); padding: 20px; border-top: 1px solid #eee; padding-bottom: 80px;}
        .settings-title { font-size: 0.9rem; font-weight: bold; color: #666; margin-bottom: 10px; }
        .backup-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom:10px;}
        .btn-outline { background: #fff; border: 1px solid #bbb; color: #555; padding: 8px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; }
        .btn-file { background: #e1eefd; border: 1px solid #bbd4f0; color: #1565C0; padding: 10px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
        textarea { width: 100%; height: 80px; margin-bottom: 8px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; color:#555; padding: 8px; font-family: monospace; }
        .btn-danger { width: 100%; padding: 10px; background: #ffebee; border: 1px solid #ffcdd2; color: #c62828; border-radius: 8px; cursor: pointer; margin-top: 20px; font-size:
